# Mage2 Module EasternEnterprise PriceBySku

    ``easternenterprise/module-pricebysku``

 - [Main Functionalities](#markdown-header-main-functionalities)
 - [Installation](#markdown-header-installation)
 - [Configuration](#markdown-header-configuration)
 - [Specifications](#markdown-header-specifications)
 - [Attributes](#markdown-header-attributes)


## Main Functionalities
Here in assignment there is no API given so I created new API which provide PriceBySku. For access this API first we need to create admin token.

For admin Token you need admin username and password and create admin token
```php
endpoint: http://baseurl/rest/V1/integration/admin/token
Header : Content-Type => application/json 
Body param: {
  "username": "yourmagentoadminusername",
  "password": "yourmagentoadminpassword"
}
```
<img src="https://raw.githubusercontent.com/jaiminmagento/EasternEnterprise/main/PriceBySku/screenshot/api1.png" />
In response you will get token that token you need to change in PriceBySku/Plugin/Magento/Catalog/Model/Product.php on line no 32.
After token changed in script you can access another created API which will give price by sending SKU for prepring API I used datapatch and included for some Sku's Price and here I am listing the array which will be added in magento table named `easternenterprise_pricebysku_pricebysku`
Sample Array for `Watches` Category as per Magento Sample Data.
```php
$data = [
            ['sku' => '24-WG02', 'price' => '82.00'],
            ['sku' => '24-WG03', 'price' => '92.00'],
            ['sku' => '24-WG01', 'price' => '85.00'],
            ['sku' => '24-WG09', 'price' => '62.00'],
            ['sku' => '24-MG01', 'price' => '63.00'],
            ['sku' => '24-MG02', 'price' => '86.00'],
            ['sku' => '24-MG03', 'price' => '87.00'],
            ['sku' => '24-MG04', 'price' => '88.00'],
            ['sku' => '24-MG05', 'price' => '89.00']
        ];
```
Next API detail as below

```php
endpoint: http://baseUrl/rest/V1/easternenterprise-pricebysku/productprice/24-WG03
Header : Content-Type => application/json 
Authorization: bearer Token
```
Token Generated by first API.
<img src="https://raw.githubusercontent.com/jaiminmagento/EasternEnterprise/main/PriceBySku/screenshot/api2.png" />

After this in frontend if you visit watch category in frontend changed price you will get from API for other category you will get Price From Magento Itself.
for e.g. http://baseUrl/gear/watches.html

Lazy loading is automatically applied to all* product images
*Any image created via Magento\Catalog\Block\Product\Image
This includes:
Product listing (category, search, product list widget)
Product relations (related, upsell, crosssell)
Product comparison
Recently viewed
Cart thumbnails
Wishlist

## Installation
\* = in production please use the `--keep-generated` option

### Type 1: Zip file

 - Unzip the zip file in `app/code/EasternEnterprise`
 - Enable the module by running `php bin/magento module:enable EasternEnterprise_PriceBySku`
 - Apply below commands after installation 
 `php bin/magento setup:upgrade`
 `php bin/magento setup:di:compile`
 `php bin/magento setup:static-content:deploy -f`
 - Flush the cache by running `php bin/magento cache:flush`

### Type 2: Composer

 - Make the module available in a composer repository for example:
    - private repository `repo.magento.com`
    - public repository `packagist.org`
    - public github repository as vcs
 - Add the composer repository to the configuration by running `composer config repositories.repo.magento.com composer https://repo.magento.com/`
 - Install the module composer by running `composer require easternenterprise/module-pricebysku`
 - enable the module by running `php bin/magento module:enable EasternEnterprise_PriceBySku`
 - apply database updates by running `php bin/magento setup:upgrade`\*
 - Flush the cache by running `php bin/magento cache:flush`


## Configuration

 - Enabled (pricebysku/general/enabled)


## Specifications

 - Plugin
	- afterGetPrice - Magento\Catalog\Model\Product > EasternEnterprise\PriceBySku\Plugin\Magento\Catalog\Model\Product
   - beforeSetTemplate - Magento\Catalog\Block\Product\Image >
   EasternEnterprise\PriceBySku\Plugin\OverrideProductImageTemplate
 - API Endpoint
	- GET - EasternEnterprise\PriceBySku\Api\ProductPriceManagementInterface > EasternEnterprise\PriceBySku\Model\ProductPriceManagement


## Attributes

 - Product - ApiData (apidata)

